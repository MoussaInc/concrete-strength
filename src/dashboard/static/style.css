/* =================== Design System (light) =================== */
:root{
  --primary: #263241;             /* Titres & accents sobres */
  --accent:  #3A7BC8;             /* Couleur d'action */
  --bg:      #F6F8FB;             /* Fond général */
  --surface: #FFFFFF;             /* Cartes / panneaux / inputs */
  --text:    #1F2937;             /* Texte principal */
  --muted:   #6B7280;             /* Texte secondaire */
  --line:    #E5E7EB;             /* Bordures légères */

  --success:#22C55E;
  --error:  #EF4444;

  --radius: 12px;
  --shadow: 0 4px 14px rgba(0,0,0,.06);
  --shadow-hover: 0 8px 24px rgba(0,0,0,.08);
  --trans: all .2s ease;

  --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
}

/* =================== Dark mode auto =================== */
@media (prefers-color-scheme: dark){
  :root{
    --primary:#E5E7EB;
    --accent:#82B1FF;
    --bg:#0F172A;       /* slate-900 */
    --surface:#0B1220;  /* slate-950-ish */
    --text:#E5E7EB;
    --muted:#94A3B8;
    --line:#1F2A44;

    --shadow: 0 1px 0 rgba(255,255,255,.04);
    --shadow-hover: 0 2px 10px rgba(0,0,0,.35);
  }
}

/* =================== Reset & Base =================== */
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family:var(--font);
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.55;
}

/* =================== Typography =================== */
h1,h2,h3,h4,h5{
  color:var(--primary);
  margin:.6rem 0 1rem;
  font-weight:650;
}
h1{ font-size:2rem; text-align:center; letter-spacing:.2px; }
h2{ font-size:1.35rem; border-bottom:1px solid var(--line); padding-bottom:.4rem; }
h3{ font-size:1.15rem; }
p,li{ color:var(--text); }
small, .muted{ color:var(--muted); }

/* =================== Links =================== */
a{
  color:var(--accent);
  text-decoration:none;
  transition:var(--trans);
}
a:hover, a:focus{ text-decoration:underline; }

/* =================== Lists =================== */
ul{ padding-left:1rem; margin:.25rem 0; }
ul li{ margin:.25rem 0; }

/* =================== Cards / Surfaces =================== */
.card, .highlight-box, .stDataFrame{
  background:var(--surface);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:1rem;
  transition:var(--trans);
}
.highlight-box:hover{
  box-shadow:var(--shadow-hover);
  transform:translateY(-2px);
}

/* =================== Forms (inputs + fix visibilité) =================== */
input, textarea, select{
  width:100%;
  border:1px solid var(--line);
  background: var(--surface);    /* fond stable */
  color: var(--text);            /* texte toujours lisible */
  border-radius:var(--radius);
  padding:.65rem .9rem;
  font:inherit;
  transition:var(--trans);
  caret-color: var(--text);
}
input:hover, textarea:hover, select:hover{
  background: var(--surface);    /* pas de blanc au hover */
}
input:focus, textarea:focus, select:focus{
  outline:none;
  background: var(--surface);    /* pas de blanc au focus */
  color: var(--text);
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(58,123,200,.15);
}

/* Placeholders lisibles */
input::placeholder, textarea::placeholder{
  color: var(--muted);
  opacity:1;
}

/* Auto-fill WebKit (évite le jaune/blanc) */
input:-webkit-autofill,
textarea:-webkit-autofill,
select:-webkit-autofill{
  -webkit-box-shadow: 0 0 0 1000px var(--surface) inset !important;
  -webkit-text-fill-color: var(--text) !important;
  caret-color: var(--text);
}

/* Number input (Streamlit) */
div[data-testid="stNumberInput"]{
  display:flex; align-items:center; gap:.4rem;
}
div[data-testid="stNumberInput"] input{
  text-align:center;
  background: var(--surface) !important;
  color: var(--text) !important;
}
div[data-testid="stNumberInput"] button{
  border:none; width:32px; height:32px; border-radius:50%;
  background:var(--accent); color:#fff; font-weight:700;
  display:flex; align-items:center; justify-content:center;
  transition:var(--trans);
}
div[data-testid="stNumberInput"] button:hover{ transform:scale(1.06); }

/* =================== Buttons =================== */
button, .stButton > button, .stDownloadButton > button{
  appearance:none;
  background:var(--accent);
  color:#fff;
  border:none;
  border-radius:var(--radius);
  padding:.7rem 1.2rem;
  font-weight:650;
  box-shadow:var(--shadow);
  transition:var(--trans);
  cursor:pointer;
}
button:hover, .stButton > button:hover, .stDownloadButton > button:hover{
  transform:translateY(-1px);
  box-shadow:var(--shadow-hover);
}
button:active, .stButton > button:active, .stDownloadButton > button:active{
  transform:scale(.98);
}

/* Secondary / subtle buttons (utilitaire) */
.btn--subtle{
  background:transparent; color:var(--primary); border:1px solid var(--line);
}
.btn--subtle:hover{ background:rgba(0,0,0,.03); }

/* =================== Alerts =================== */
.stAlert{
  border-radius:var(--radius) !important;
  box-shadow:var(--shadow) !important;
}
.stAlert[data-testid="stSuccess"]{ border-left:4px solid var(--success); }
.stAlert[data-testid="stError"]{ border-left:4px solid var(--error); }

/* =================== Tabs =================== */
.stTabs [role="tablist"]{ border-bottom:1px solid var(--line); }
.stTabs [role="tab"]{
  border-radius:10px 10px 0 0;
  padding:.65rem 1rem;
  color:var(--muted);
  font-weight:600;
  transition:var(--trans);
}
.stTabs [role="tab"][aria-selected="true"]{
  color:var(--primary);
  border-bottom:3px solid var(--accent);
}
.stTabs [role="tab"]:hover:not([aria-selected="true"]){
  color:var(--primary);
  background:rgba(0,0,0,.035);
}

/* =================== Tables / DataFrame =================== */
.stDataFrame{
  padding:.4rem !important;
}
.stDataFrame table{ font-size:.95rem; }

/* =================== Footer =================== */
footer{
  text-align:center; color:var(--muted);
  font-size:.9rem; padding:1.2rem 0; margin-top:1.6rem;
  border-top:1px solid var(--line);
}

/* =================== Responsive =================== */
@media (max-width: 768px){
  h1{ font-size:1.7rem; }
  h2{ font-size:1.2rem; }
  .highlight-box{ padding:.9rem; }
  input, textarea, select{ padding:.55rem .8rem; }
  div[data-testid="stNumberInput"] button{ width:28px; height:28px; }
}
@media (max-width: 480px){
  h1{ font-size:1.45rem; }
  .stTabs [role="tab"]{ padding:.45rem .7rem; font-size:.9rem; }
  div[data-testid="stNumberInput"] button{ width:24px; height:24px; }
}

/* =================== Streamlit polish =================== */
/* Supprime certains halos natifs trop marqués tout en gardant notre focus ring */
:focus{ outline:none; }
